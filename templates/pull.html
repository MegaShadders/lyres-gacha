{% extends "layout.html" %}

{% block title %}: Shrine{% endblock %} 

{% block body %}
    <div class="position-relative carousel slide" id="pull-background" style="background-image: url(static/images/flowers.jpg)" data-bs-wrap="false">
        <div class="carousel-inner" style="height: 100%;">
            <div class="position-absolute carousel-item active" id="portrait-container">
                <img src="static/images/gate.png">
            </div>

            {% for unit in units %}
                <div class="position-absolute carousel-item" id="portrait-container">
                    <img src="static/images/lyres/portraits/{{ unit[0] }}.png">
                </div>
            {% endfor %}
            
            {% if units|length != 1 %}
                <div class="position-absolute carousel-item" id="portrait-container">
                    <div id="portraits-last">
                        {% for unit in units %}
                                <img src="static/images/lyres/portraits/{{ unit[0] }}.png">
                        {% endfor %}
                    </div>
                </div>
            {% endif %}
        </div>
        <button class="carousel-control-next" type="button" data-bs-target="#pull-background" data-bs-slide="next" style="width: 100%;"></button>
        <button id="skip-button" class="carousel-control-next position-absolute end-0 bottom-0 fs-1 opacity-100 bg-dark bg-opacity-75 rounded-pill" type="button" data-bs-target="#pull-background" data-bs-slide-to="{{ units|length + 1 }}" style="opacity: 90%; height: 10%; top: 90%">
            <span class="carousel-control-next-icon " aria-hidden="true"></span>
            <span class="carousel-control-next-icon " aria-hidden="true"></span>
            <span class="carousel-control-next-icon " aria-hidden="true"></span>
        </button>        
    </div>
    
    <!-- Prevent Form Resubmission -->
    <script>
        if ( window.history.replaceState ) {
            window.history.replaceState( null, null, window.location.href );
        }
    </script>

    <script>
        var button = document.getElementById("skip-button");
        button.addEventListener("click", hide, false)

        function hide() {
            document.getElementById('skip-button').style.display = 'block'; 
            this.style.display = 'none'
        }  
    </script>
    
    

{% endblock %}